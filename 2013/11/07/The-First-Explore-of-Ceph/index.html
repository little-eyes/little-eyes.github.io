<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="What if we do not use HDFS …  Recently I was working on a data placement project related to high performance computer. How to effectively maintain the data object among the devices become a very chal">
<meta property="og:type" content="article">
<meta property="og:title" content="The First Explore of Ceph">
<meta property="og:url" content="http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/index.html">
<meta property="og:site_name" content="The Little&#39;s Place">
<meta property="og:description" content="What if we do not use HDFS …  Recently I was working on a data placement project related to high performance computer. How to effectively maintain the data object among the devices become a very chal">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2013-11-07T00:00:00.000Z">
<meta property="article:modified_time" content="2021-05-07T04:09:05.356Z">
<meta property="article:author" content="Jilong Liao">
<meta property="article:tag" content="big data">
<meta property="article:tag" content="object storage">
<meta property="article:tag" content="distributed system">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>The First Explore of Ceph</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" "Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/tags/">Tags</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/little-eyes">Projects</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post " href="/2014/02/07/A-Reading-List-for-Windows-Modern-Apps-Development/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post " href="/2013/10/07/Deploy-Hadoop-Cluster-in-Hydra-Lab/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top " href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post " href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/&text=The First Explore of Ceph"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/&title=The First Explore of Ceph"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/&is_video=false&description=The First Explore of Ceph"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=The First Explore of Ceph&body=Check out this article: http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/&title=The First Explore of Ceph"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/&title=The First Explore of Ceph"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/&title=The First Explore of Ceph"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/&title=The First Explore of Ceph"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/&name=The First Explore of Ceph&description=&lt;blockquote&gt;
&lt;p&gt;What if we do not use HDFS …&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Recently I was working on a data placement project related to high performance computer. How to effectively maintain the data object among the devices become a very challenge problem in the HPC’s big data storage. Then I have a chance to look at an alternative file system or object store &lt;a href=&#34;http://ceph.com/&#34;&gt;Ceph&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The way we investigate the Ceph is to deploy a testbed on Amazon AWS environment. This process is not easy at all, it involves many tricky points during the initial deployment. This article intends to make it easy for you to deploy Ceph inside AWS environment.&lt;/p&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/&t=The First Explore of Ceph"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Testbed-Pre-deployment"><span class="toc-number">1.</span> <span class="toc-text">Testbed Pre-deployment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Deploy-the-Storage-Cluster"><span class="toc-number">2.</span> <span class="toc-text">Deploy the Storage Cluster</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        The First Explore of Ceph
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Jilong Liao</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2013-11-07T00:00:00.000Z" itemprop="datePublished">2013-11-07</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/technology/">technology</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/big-data/" rel="tag">big data</a>, <a class="tag-link-link" href="/tags/distributed-system/" rel="tag">distributed system</a>, <a class="tag-link-link" href="/tags/object-storage/" rel="tag">object storage</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <blockquote>
<p>What if we do not use HDFS …</p>
</blockquote>
<p>Recently I was working on a data placement project related to high performance computer. How to effectively maintain the data object among the devices become a very challenge problem in the HPC’s big data storage. Then I have a chance to look at an alternative file system or object store <a target="_blank" rel="noopener" href="http://ceph.com/">Ceph</a>.</p>
<p>The way we investigate the Ceph is to deploy a testbed on Amazon AWS environment. This process is not easy at all, it involves many tricky points during the initial deployment. This article intends to make it easy for you to deploy Ceph inside AWS environment.</p>
<span id="more"></span>

<h2 id="Testbed-Pre-deployment"><a href="#Testbed-Pre-deployment" class="headerlink" title="Testbed Pre-deployment"></a>Testbed Pre-deployment</h2><p>Before we jump into the exact steps, the node types of Ceph worth our attention. Admin-node, MDS, MON, and OSD are the four types of nodes in Ceph. Admin-node is the place you initiate all the deployment commands; and MDS is short for metadata containing all the metadata of the objects; and MON is short for monitor which tracks the system; and OSD is the object storage device which contains the physical data objects. If you are not familiar with Ceph, I would suggest you to read through the following articles.</p>
<p><a target="_blank" rel="noopener" href="http://ceph.com/docs/master/architecture/">http://ceph.com/docs/master/architecture/</a></p>
<p>Our testbed is very simple, we follow the <a target="_blank" rel="noopener" href="http://ceph.com/docs/master/start/">standard tutorial</a> to deploy Ceph from the scratch. The only thing different from this tutorial is the environment which in our scenario is Amazon AWS. The sample testbed is shown in the following figure.</p>
<p>![ceph-testbed](/images/ceph.jpg)</p>
<p>Now we are ready to start deploying Ceph into the Amazon AWS environment.</p>
<p>First, we create 4 instances with Ubuntu Server 12.04.3 LTS 64-bit instance in Amazon AWS. The four instances have the following detail information.</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">node</span>-admin:</span><br><span class="line"><span class="attribute">Public</span> DNS: ec<span class="number">2</span>-<span class="number">54</span>-<span class="number">204</span>-<span class="number">207</span>-<span class="number">187</span>.compute-<span class="number">1</span>.amazonaws.com</span><br><span class="line"><span class="attribute">Private</span> DNS: ip-<span class="number">10</span>-<span class="number">185</span>-<span class="number">54</span>-<span class="number">155</span>.ec<span class="number">2</span>.internal</span><br><span class="line"><span class="attribute">Private</span> IP: <span class="number">10.185.54.155</span></span><br><span class="line"><span class="attribute">Hostname</span>: ip-<span class="number">10</span>-<span class="number">185</span>-<span class="number">54</span>-<span class="number">155</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">node</span>-<span class="number">0</span>:</span><br><span class="line"><span class="attribute">Public</span> DNS: ec<span class="number">2</span>-<span class="number">50</span>-<span class="number">17</span>-<span class="number">21</span>-<span class="number">155</span>.compute-<span class="number">1</span>.amazonaws.com</span><br><span class="line"><span class="attribute">Private</span> DNS: ip-<span class="number">10</span>-<span class="number">185</span>-<span class="number">23</span>-<span class="number">23</span>.ec<span class="number">2</span>.internal</span><br><span class="line"><span class="attribute">Private</span> IP: <span class="number">10.185.23.23</span></span><br><span class="line"><span class="attribute">Hostname</span>: ip-<span class="number">10</span>-<span class="number">185</span>-<span class="number">23</span>-<span class="number">23</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">node</span>-<span class="number">1</span>:</span><br><span class="line"><span class="attribute">Public</span> DNS: ec<span class="number">2</span>-<span class="number">54</span>-<span class="number">227</span>-<span class="number">102</span>-<span class="number">224</span>.compute-<span class="number">1</span>.amazonaws.com</span><br><span class="line"><span class="attribute">Private</span> DNS: ip-<span class="number">10</span>-<span class="number">185</span>-<span class="number">199</span>-<span class="number">213</span>.ec<span class="number">2</span>.internal</span><br><span class="line"><span class="attribute">Private</span> IP: <span class="number">10.185.199.213</span></span><br><span class="line"><span class="attribute">Hostname</span>: ip-<span class="number">10</span>-<span class="number">185</span>-<span class="number">199</span>-<span class="number">213</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">node</span>-<span class="number">2</span>:</span><br><span class="line"><span class="attribute">Public</span> DNS: ec<span class="number">2</span>-<span class="number">184</span>-<span class="number">73</span>-<span class="number">131</span>-<span class="number">183</span>.compute-<span class="number">1</span>.amazonaws.com</span><br><span class="line"><span class="attribute">Private</span> DNS: ip-<span class="number">10</span>-<span class="number">185</span>-<span class="number">65</span>-<span class="number">179</span>.ec<span class="number">2</span>.internal</span><br><span class="line"><span class="attribute">Private</span> IP: <span class="number">10.185.65.179</span></span><br><span class="line"><span class="attribute">Hostname</span>: ip-<span class="number">10</span>-<span class="number">185</span>-<span class="number">65</span>-<span class="number">179</span></span><br></pre></td></tr></table></figure>

<p>One thing we need to pay attention is the <strong>hostname</strong>, because Ceph heavily relies on the hostname instead of IP address. So figure the hostname of an instance is the most important thing. When you create the instance, you will associate it with a security group and a private key. The security group needs to allows all TCP connections, so you may need to add “All TCPs” into your security group’s inbound rules.</p>
<p>Next, login to the <code>node-admin</code> through the SSH with the following command.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -i ceph-deploy.pem ubuntu@ec2-54-204-207-187.compute-1.amazonaws.com</span><br></pre></td></tr></table></figure>

<p>Due to the private key restriction, you cannot SSH another instance without providing the private key. So you need to copy the private key to the node-admin.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ scp -i ceph-deploy.pem ceph-deploy.pem ubuntu@ec2-54-204-207-187.compute-1.amazonaws.com:/home/ubuntu</span><br></pre></td></tr></table></figure>

<p>Then you will see <code>ceph-deploy.pem</code> is in the node-admin’s home directory.</p>
<p>Because Ceph requires password-less access from <code>node-admin</code> to other nodes, we need to copy the public key of <code>node-admin</code> to <code>node-0</code>, <code>node-1</code>, and <code>node-2</code>. So we first create the keyring with <code>ssh-keygen</code>.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -b 2048</span><br></pre></td></tr></table></figure>

<p>The keyring will be stored in <code>~/.ssh</code> directory. Unfortunately, we cannot use <code>ssh-copy-id</code> to share the public key directly, because <code>ssh-copy-id</code> does not work with private key which prevents us from access the other instance. So we use an alternative way to copy the public key in the following.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cat .ssh/id_rsa.pub | ssh -i ceph-deploy.pem ubuntu@ec2-50-17-21-155.compute-1.amazonaws.com <span class="string">&quot;cat - &gt;&gt; ~/.ssh/authorized_keys2&quot;</span></span><br><span class="line">$ cat .ssh/id_rsa.pub | ssh -i ceph-deploy.pem ubuntu@ec2-54-227-102-224.compute-1.amazonaws.com <span class="string">&quot;cat - &gt;&gt; ~/.ssh/authorized_keys2&quot;</span></span><br><span class="line">$ cat .ssh/id_rsa.pub | ssh -i ceph-deploy.pem ubuntu@ec2-184-73-131-183.compute-1.amazonaws.com <span class="string">&quot;cat - &gt;&gt; ~/.ssh/authorized_keys2&quot;</span></span><br></pre></td></tr></table></figure>

<p>After sharing the public key with the other nodes, we can SSH <code>node-0</code>, <code>node-1</code> and <code>node-2</code> directly without any password or secure private key.</p>
<p>Thereafter, we can install <strong>ceph-deploy</strong> package on <code>node-admin</code> through the following commands.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ wget -q -O- <span class="string">&#x27;https://ceph.com/git/?p=ceph.git;a=blob_plain;f=keys/release.asc&#x27;</span> | sudo apt-key add -</span><br><span class="line">$ <span class="built_in">echo</span> deb http://ceph.com/debian-dumpling/ $(lsb_release -sc) main | sudo tee /etc/apt/sources.list.d/ceph.list</span><br><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install ceph-deploy</span><br></pre></td></tr></table></figure>

<h2 id="Deploy-the-Storage-Cluster"><a href="#Deploy-the-Storage-Cluster" class="headerlink" title="Deploy the Storage Cluster"></a>Deploy the Storage Cluster</h2><p>On the <code>node-admin</code>, we first create a new storage cluster by initially adding a monitor. For example, we add <code>node-0</code> into the cluster via the following command.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ceph-deploy new ip-10-185-23-23</span><br></pre></td></tr></table></figure>

<p>Then we need to install ceph on <code>node-0</code>, <code>node-1</code> and <code>node-2</code>.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ceph-deploy install ip-10-185-23-23 ip-10-185-199-213 ip-10-185-65-179</span><br></pre></td></tr></table></figure>

<p>This step could take several minutes to finish, so just be patient. Once it finishes, we need to setup the monitors. In our example, we use <code>node-0</code> as the single monitor in the testbed.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ceph-deploy mon create ip-10-185-23-23</span><br></pre></td></tr></table></figure>

<p>Next, we need to gather the keyrings from the monitor.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ceph-deploy gatherkeys ip-10-185-23-23</span><br></pre></td></tr></table></figure>

<p>Till now, Ceph has been installed on every node, and we have created a cluster with one monitor <code>node-0</code>. Now we move on to add OSDs into the cluster. As we know, <code>node-1</code> and <code>node-2</code> are the two OSDs in our testbed. We need to make sure each of them has a clear directory or disk to contain the data objects. Thus we create a directory <code>/tmp/osd</code> on each of the instance.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ ssh ip-10-185-199-213</span><br><span class="line">$ sudo mkdir /tmp/osd</span><br><span class="line">$ <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">$ ssh ip-10-185-65-179</span><br><span class="line">$ sudo mkdir /tmp/osd</span><br><span class="line">$ <span class="built_in">exit</span></span><br></pre></td></tr></table></figure>

<p>After we have such a directory reserved for Ceph, then we can prepare the OSDs and activate them.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ceph-deploy osd prepare ip-10-185-199-213:/tmp/osd ip-10-185-65-179:/tmp/osd</span><br><span class="line">$ ceph-deploy osd activate ip-10-185-199-213:/tmp/osd ip-10-185-65-179:/tmp/osd</span><br></pre></td></tr></table></figure>

<p>Note that this step may jump up several <strong>errors</strong>, you could just ignore them first. By repeating the above two commands again, the error will disappear. Finally, we will add the MDS into the cluster. Here we use <code>node-0</code> to hold both MON and MDS. So the command is the following.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ceph-deploy mds create ip-10-185-23-23</span><br></pre></td></tr></table></figure>

<p>To validate whether the storage cluster has been successfully deployed, execute the following command on <code>node-0</code>.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo ceph -w</span><br></pre></td></tr></table></figure>

<p>If we can see the message saying <strong>HEALTH_OK</strong>, then it means we have succeed. A sample message from our sample cluster is the following.</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">cluster</span> <span class="number">1</span>aae<span class="number">0</span>add-cc<span class="number">1</span>f-<span class="number">40</span>e<span class="number">8</span>-<span class="number">89</span>cb-<span class="number">8</span>a<span class="number">7</span>e<span class="number">50</span>be<span class="number">6</span>c<span class="number">4</span>a</span><br><span class="line"><span class="attribute">health</span> HEALTH_OK</span><br><span class="line"><span class="attribute">monmap</span> e<span class="number">1</span>: <span class="number">1</span> mons at &#123;ip-<span class="number">10</span>-<span class="number">185</span>-<span class="number">23</span>-<span class="number">23</span>=<span class="number">10.185.23.23:6789</span>/<span class="number">0</span>&#125;, election epoch <span class="number">2</span>, quorum <span class="number">0</span> ip-<span class="number">10</span>-<span class="number">185</span>-<span class="number">23</span>-<span class="number">23</span></span><br><span class="line"><span class="attribute">osdmap</span> e<span class="number">9</span>: <span class="number">2</span> osds: <span class="number">2</span> up, <span class="number">2</span> in</span><br><span class="line"><span class="attribute">pgmap</span> v<span class="number">24</span>: <span class="number">192</span> pgs: <span class="number">192</span> active+clean; <span class="number">9518</span> bytes data, <span class="number">4390</span> MB used, <span class="number">10916</span> MB / <span class="number">16126</span> MB avail</span><br><span class="line"><span class="attribute">mdsmap</span> e<span class="number">4</span>: <span class="number">1</span>/<span class="number">1</span>/<span class="number">1</span> up &#123;<span class="number">0</span>=ip-<span class="number">10</span>-<span class="number">185</span>-<span class="number">23</span>-<span class="number">23</span>=up:active&#125;</span><br></pre></td></tr></table></figure>


  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/tags/">Tags</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/little-eyes">Projects</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Testbed-Pre-deployment"><span class="toc-number">1.</span> <span class="toc-text">Testbed Pre-deployment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Deploy-the-Storage-Cluster"><span class="toc-number">2.</span> <span class="toc-text">Deploy the Storage Cluster</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/&text=The First Explore of Ceph"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/&title=The First Explore of Ceph"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/&is_video=false&description=The First Explore of Ceph"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=The First Explore of Ceph&body=Check out this article: http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/&title=The First Explore of Ceph"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/&title=The First Explore of Ceph"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/&title=The First Explore of Ceph"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/&title=The First Explore of Ceph"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/&name=The First Explore of Ceph&description=&lt;blockquote&gt;
&lt;p&gt;What if we do not use HDFS …&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Recently I was working on a data placement project related to high performance computer. How to effectively maintain the data object among the devices become a very challenge problem in the HPC’s big data storage. Then I have a chance to look at an alternative file system or object store &lt;a href=&#34;http://ceph.com/&#34;&gt;Ceph&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The way we investigate the Ceph is to deploy a testbed on Amazon AWS environment. This process is not easy at all, it involves many tricky points during the initial deployment. This article intends to make it easy for you to deploy Ceph inside AWS environment.&lt;/p&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://jilongliao.com/2013/11/07/The-First-Explore-of-Ceph/&t=The First Explore of Ceph"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2010-2021
    Jilong Liao
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/tags/">Tags</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/little-eyes">Projects</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-32402817-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-32402817-1');
    </script>

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'littleeyes';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


</body>
</html>
