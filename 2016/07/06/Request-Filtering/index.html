<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="In a web service like the OData or other web API services, you might encounter into a situation to restrict some users to access some sensitive information, but not the entire data source. Usually, th">
<meta property="og:type" content="article">
<meta property="og:title" content="HTTP Module and Request Filtering in ASP.NET Stack">
<meta property="og:url" content="http://jilongliao.com/2016/07/06/Request-Filtering/index.html">
<meta property="og:site_name" content="The Little&#39;s Place">
<meta property="og:description" content="In a web service like the OData or other web API services, you might encounter into a situation to restrict some users to access some sensitive information, but not the entire data source. Usually, th">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2016-07-06T00:00:00.000Z">
<meta property="article:modified_time" content="2021-01-10T05:48:28.424Z">
<meta property="article:author" content="Jilong Liao">
<meta property="article:tag" content="infrastructure">
<meta name="twitter:card" content="summary">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>HTTP Module and Request Filtering in ASP.NET Stack</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 4.2.1"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/tags/">Tags</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="https://github.com/little-eyes" target="_blank" rel="noopener">Projects</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2016/08/03/ux-testing/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2016/05/10/asp-net-core/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://jilongliao.com/2016/07/06/Request-Filtering/" target="_blank" rel="noopener"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://jilongliao.com/2016/07/06/Request-Filtering/&text=HTTP Module and Request Filtering in ASP.NET Stack" target="_blank" rel="noopener"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://jilongliao.com/2016/07/06/Request-Filtering/&title=HTTP Module and Request Filtering in ASP.NET Stack" target="_blank" rel="noopener"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://jilongliao.com/2016/07/06/Request-Filtering/&is_video=false&description=HTTP Module and Request Filtering in ASP.NET Stack" target="_blank" rel="noopener"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=HTTP Module and Request Filtering in ASP.NET Stack&body=Check out this article: http://jilongliao.com/2016/07/06/Request-Filtering/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://jilongliao.com/2016/07/06/Request-Filtering/&title=HTTP Module and Request Filtering in ASP.NET Stack" target="_blank" rel="noopener"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://jilongliao.com/2016/07/06/Request-Filtering/&title=HTTP Module and Request Filtering in ASP.NET Stack" target="_blank" rel="noopener"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://jilongliao.com/2016/07/06/Request-Filtering/&title=HTTP Module and Request Filtering in ASP.NET Stack" target="_blank" rel="noopener"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://jilongliao.com/2016/07/06/Request-Filtering/&title=HTTP Module and Request Filtering in ASP.NET Stack" target="_blank" rel="noopener"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://jilongliao.com/2016/07/06/Request-Filtering/&name=HTTP Module and Request Filtering in ASP.NET Stack&description=&lt;p&gt;In a web service like the &lt;a href=&#34;http://www.odata.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OData&lt;/a&gt; or other web API services, you might encounter into a situation to restrict some users to access some sensitive information, &lt;em&gt;but not the entire data source&lt;/em&gt;. Usually, the best design is to lock down restricted data in the database level with some anchor tecniques. However, this might require you to change the majority of the APIs and stored proceedures signatures which is a significant amount of work and long way to test.&lt;/p&gt;
&lt;p&gt;Alternatively, you can do a filtering against either the request or response. This article wants to elaborate the request filtering approach in a ASP.NET stack.&lt;/p&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Customized-Http-Module"><span class="toc-number">1.</span> <span class="toc-text">Customized Http Module</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Request-Filtering"><span class="toc-number">2.</span> <span class="toc-text">Request Filtering</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        HTTP Module and Request Filtering in ASP.NET Stack
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">The Little's Place</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2016-07-06T00:00:00.000Z" itemprop="datePublished">2016-07-06</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/technology/">technology</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/infrastructure/" rel="tag">infrastructure</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>In a web service like the <a href="http://www.odata.org/" target="_blank" rel="noopener">OData</a> or other web API services, you might encounter into a situation to restrict some users to access some sensitive information, <em>but not the entire data source</em>. Usually, the best design is to lock down restricted data in the database level with some anchor tecniques. However, this might require you to change the majority of the APIs and stored proceedures signatures which is a significant amount of work and long way to test.</p>
<p>Alternatively, you can do a filtering against either the request or response. This article wants to elaborate the request filtering approach in a ASP.NET stack.</p>
<a id="more"></a>

<h2 id="Customized-Http-Module"><a href="#Customized-Http-Module" class="headerlink" title="Customized Http Module"></a>Customized Http Module</h2><p>To begin with the solution, we need to understand the concept of <code>http module</code> in ASP.NET stack. By searching the keyword, you will see a lot of good resources online. So I will focus on how to create a customized http module.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Example.OData.Service</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">AccessRestrictionModule</span> : <span class="title">IHttpModule</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Dispose</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Init</span>(<span class="params">IHttpApplication app</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">      app.PostAuthenticateRequest += OnPostAuthenticateRequest;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// IHttpModule needs to implement the proper disposible pattern.</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Dispose</span>(<span class="params"><span class="keyword">bool</span> disposing</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnPostAuthenticateRequest</span>(<span class="params"><span class="keyword">object</span> sender, EventArgs args</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The ASP.NET stack provides you a list of event life cycle which you can register during the initialization. So the above example provides a foundation to create a customized http module. Note the <code>protected virtual void Dispose</code> function, you will need to implement a proper disposible pattern in order to cover the potential memory leaks.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">system.webServer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">add</span> <span class="attr">name</span>=<span class="string">"AccessRestrictionModule"</span> <span class="attr">type</span>=<span class="string">"Example.OData.Service.AccessRestrictionModule"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">system.webServer</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>To enable this customized module, you can just add the configuration into your <code>Web.config</code> file, then IIS will pick up from there.</p>
<h2 id="Request-Filtering"><a href="#Request-Filtering" class="headerlink" title="Request Filtering"></a>Request Filtering</h2><p>By far, we have a separate HTTP module to handle the request. We will put all the filtering implementation into this module because it’s the least couple way with the original OData service, and you can easily turn on or off via the Web.config file.</p>
<p>The reason we choose <code>PostAuthenticateRequest</code> event is because we should get the authenticated user already. So your <code>OnPostAuthenticateRequest</code> callback should have some logic like the following code.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnPostAuthenticateRequest</span>(<span class="params"><span class="keyword">object</span> sender, EventArgs args</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  HttpApplication app = (HttpApplication)sender;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// leave the autentication failure to normal OData service.</span></span><br><span class="line">  <span class="keyword">if</span> (!app.Context.Request.IsAuthenticated)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// process the GET request.</span></span><br><span class="line">  <span class="keyword">if</span> (app.Context.Request.RequestType == <span class="string">"GET"</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    RejectRequest(app.Context, <span class="string">"error"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (app.Context.Request.RequestType == <span class="string">"POST"</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    app.Context.Request.Filter = <span class="keyword">new</span> RequestFilter(app.Context.Request.Filter, app.Context);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// reject a request.</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">RejectRequest</span>(<span class="params">HttpContext context, <span class="keyword">string</span> message</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  context.Response.StatusCode = (<span class="keyword">int</span>)HttpStatusCode.OK;</span><br><span class="line">  context.Response.OutputStream.Write(context.Response.ContentEncoding.GetBytes(message), <span class="number">0</span>, context.Response.ContentEncoding.GetByteCount(message));</span><br><span class="line">  context.Response.ContentType = <span class="string">"application/json"</span>;</span><br><span class="line">  context.response.End();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>For <code>GET</code> request, it’s straightforward to handle but <code>POST</code> request needs to be handled in a different way: <code>request filter</code>. Essentially, request filter is a <code>Stream</code> which you can read the POST content, then write back to the pipeline. You cannot do it inside the http module, because the request InputStream is <code>read-only</code>.</p>
<p>A good starting point to understand how to intercept the <code>POST</code> via request filter can be found in this <a href="https://msdn.microsoft.com/en-us/library/system.web.httprequest.filter(v=vs.110).aspx" target="_blank" rel="noopener">MSDN article</a>. One interesting thing you might need to pay attention is that the original stream is loaded from the stack is not at the constructor time. It is right before the first <code>read()</code>. Therefore, you need to do a <code>TryLoadStream()</code> for all the methods just in case they are not called in the right order.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// this code only show the critical part!</span></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">RequestFilter</span> : <span class="title">Stream</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">private</span> MemoryStream ms;</span><br><span class="line">  <span class="keyword">private</span> Stream originalStream;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">string</span> streamContent;</span><br><span class="line">  <span class="keyword">private</span> HttpContext currentHttpContext;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">RequestFilter</span>(<span class="params">Stream stream, HttpContext context</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    originalStream = stream;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">bool</span> CanRead</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">get</span></span><br><span class="line">    &#123;</span><br><span class="line">      TryLoadStream();</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">bool</span> Length</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">get</span></span><br><span class="line">    &#123;</span><br><span class="line">      TryLoadStream();</span><br><span class="line">      <span class="keyword">return</span> ms.Length;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">int</span> <span class="title">Read</span>(<span class="params"><span class="keyword">byte</span>[] buffer, <span class="keyword">int</span> offset, <span class="keyword">int</span> count</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    TryLoadStream();</span><br><span class="line">    <span class="comment">// process your content..</span></span><br><span class="line">    ProcessStreamContent();</span><br><span class="line">    <span class="keyword">return</span> ms.Read(buffer, offset, count);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">TryLoadStream</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    <span class="keyword">if</span> (String.IsNullOrEmpty(streamContent))</span><br><span class="line">    &#123;</span><br><span class="line">      StreamReader sr = <span class="keyword">new</span> StreamReader(originalStream, currentHttpContext.Request.ContentEncoding);</span><br><span class="line">      streamContent = sr.ReadToEnd();</span><br><span class="line">      ms = <span class="keyword">new</span> MemoryStream();</span><br><span class="line">      <span class="keyword">byte</span>[] bytes = currentHttpContext.Request.ContentEncoding.GetBytes(streamContent);</span><br><span class="line">      ms.Write(bytes, <span class="number">0</span>, bytes.Length);</span><br><span class="line">      ms.Seek(<span class="number">0</span>, SeekOrigin.Begin);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ProcessStreamContent</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    RejectRequest(currentHttpContext, <span class="string">"test"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Now you can apply your filtering rules to both <code>GET</code> and <code>POST</code> requests. The overhead it brings to your web services is minimal as long as you keep your rule simple and straightforward.</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/tags/">Tags</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="https://github.com/little-eyes" target="_blank" rel="noopener">Projects</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Customized-Http-Module"><span class="toc-number">1.</span> <span class="toc-text">Customized Http Module</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Request-Filtering"><span class="toc-number">2.</span> <span class="toc-text">Request Filtering</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://jilongliao.com/2016/07/06/Request-Filtering/" target="_blank" rel="noopener"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://jilongliao.com/2016/07/06/Request-Filtering/&text=HTTP Module and Request Filtering in ASP.NET Stack" target="_blank" rel="noopener"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://jilongliao.com/2016/07/06/Request-Filtering/&title=HTTP Module and Request Filtering in ASP.NET Stack" target="_blank" rel="noopener"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://jilongliao.com/2016/07/06/Request-Filtering/&is_video=false&description=HTTP Module and Request Filtering in ASP.NET Stack" target="_blank" rel="noopener"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=HTTP Module and Request Filtering in ASP.NET Stack&body=Check out this article: http://jilongliao.com/2016/07/06/Request-Filtering/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://jilongliao.com/2016/07/06/Request-Filtering/&title=HTTP Module and Request Filtering in ASP.NET Stack" target="_blank" rel="noopener"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://jilongliao.com/2016/07/06/Request-Filtering/&title=HTTP Module and Request Filtering in ASP.NET Stack" target="_blank" rel="noopener"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://jilongliao.com/2016/07/06/Request-Filtering/&title=HTTP Module and Request Filtering in ASP.NET Stack" target="_blank" rel="noopener"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://jilongliao.com/2016/07/06/Request-Filtering/&title=HTTP Module and Request Filtering in ASP.NET Stack" target="_blank" rel="noopener"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://jilongliao.com/2016/07/06/Request-Filtering/&name=HTTP Module and Request Filtering in ASP.NET Stack&description=&lt;p&gt;In a web service like the &lt;a href=&#34;http://www.odata.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OData&lt;/a&gt; or other web API services, you might encounter into a situation to restrict some users to access some sensitive information, &lt;em&gt;but not the entire data source&lt;/em&gt;. Usually, the best design is to lock down restricted data in the database level with some anchor tecniques. However, this might require you to change the majority of the APIs and stored proceedures signatures which is a significant amount of work and long way to test.&lt;/p&gt;
&lt;p&gt;Alternatively, you can do a filtering against either the request or response. This article wants to elaborate the request filtering approach in a ASP.NET stack.&lt;/p&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2021 Jilong Liao
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/tags/">Tags</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="https://github.com/little-eyes" target="_blank" rel="noopener">Projects</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-32402817-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Baidu Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'littleeyes';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


</body>
</html>
